networks:
  default:
    name: ${USER}_ollama_net

services:
  env_container:
    image: lusha/pydev
    container_name: ${USER}_pydev_env
    env_file:
      - .env
    user: "1142:1142"
    stdin_open: true  # same as -i
    tty: true         # same as -t
    command: /bin/bash
    ports: # HOST:CONTAINER
      - "10882:8888"
    volumes:
      - /home/lusha/storage:/home/lusha
      - /multiverse/datasets/lusha:/home/lusha/star_code/data/datasets
      - /multiverse/datasets/shared/action-genome:/home/lusha/star_code/data/datasets/action-genome
      - /multiverse/datasets/shared/charades/Charades_v1_480:/home/lusha/star_code/data/datasets/action-genome/Charades_v1_480
      - /multiverse/datasets/shared/STAR:/home/lusha/star_code/data/datasets/STAR
    deploy:
      resources:
        reservations:
          devices:
            - capabilities: [gpu]
              device_ids: ["3"]
    cpuset: "0-7"
